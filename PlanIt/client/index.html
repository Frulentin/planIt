<!DOCTYPE html>
<html lang="fr" data-theme="light">
  <head>
    <!-- Encodage et responsive -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Titre affiché dans l’onglet -->
    <title>PlanIt · Votre semaine parfaitement organisée</title>

    <!-- Feuille de style -->
    <link rel="stylesheet" href="styles.css" />

    <!-- Favicon en SVG (icône dans l’onglet) -->
    <link 
      rel="icon" 
      href="data:image/svg+xml,
        <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
          <rect fill='%235764f8' rx='20' width='100' height='100'/>
          <text x='50' y='62' font-size='56' text-anchor='middle' fill='white' font-family='Arial, sans-serif'>P</text>
        </svg>" 
    />
  </head>

  <body>
    <!-- Fond avec effet dégradé -->
    <div class="gradient"></div>

    <!-- Structure principale -->
    <div class="app-shell">

      <!-- En-tête de l’application -->
      <header class="app-header">
        <!-- Logo + nom + slogan -->
        <div class="brand">
          <div class="brand-icon">✦</div>
          <div>
            <h1>PlanIt</h1>
            <p>Planifiez, priorisez et réalisez vos objectifs.</p>
          </div>
        </div>
        <!-- Bouton de déconnexion (masqué par défaut) -->
        <button class="ghost-button hidden" data-logout>Déconnexion</button>
      </header>

      <!-- Contenu principal -->
      <main class="app-main">
        
        <!-- Vue d’authentification (connexion/inscription) -->
        <section class="auth-view" data-auth>
          <div class="auth-card">

            <!-- Onglets (connexion / inscription) -->
            <div class="tabs" role="tablist">
              <button class="tab active" data-tab="login" role="tab">Connexion</button>
              <button class="tab" data-tab="register" role="tab">Créer un compte</button>
            </div>

            <div class="form-wrapper">
              <!-- Formulaire de connexion -->
              <form id="login-form" class="form active" autocomplete="on">
                <h2>Heureux de vous revoir !</h2>
                <p class="subtitle">Connectez-vous pour retrouver votre planning personnalisé.</p>

                <!-- Email -->
                <div class="field">
                  <label for="login-email">Adresse e-mail</label>
                  <input id="login-email" name="email" type="email" placeholder="exemple@mail.com" required />
                </div>

                <!-- Mot de passe -->
                <div class="field">
                  <label for="login-password">Mot de passe</label>
                  <input id="login-password" name="password" type="password" placeholder="••••••••" minlength="6" required />
                </div>

                <!-- Bouton connexion -->
                <div class="form-footer">
                  <button type="submit" class="primary-button">Se connecter</button>
                  <p class="feedback" data-login-feedback></p>
                </div>
              </form>

              <!-- Formulaire d’inscription -->
              <form id="register-form" class="form" autocomplete="on">
                <h2>Première visite ?</h2>
                <p class="subtitle">Créez votre espace pour ne plus jamais oublier une tâche.</p>

                <!-- Prénom -->
                <div class="field">
                  <label for="register-name">Prénom (optionnel)</label>
                  <input id="register-name" name="name" type="text" placeholder="Alex" />
                </div>

                <!-- Email -->
                <div class="field">
                  <label for="register-email">Adresse e-mail</label>
                  <input id="register-email" name="email" type="email" placeholder="exemple@mail.com" required />
                </div>

                <!-- Mot de passe -->
                <div class="field">
                  <label for="register-password">Mot de passe</label>
                  <input id="register-password" name="password" type="password" placeholder="Minimum 6 caractères" minlength="6" required />
                </div>

                <!-- Bouton inscription -->
                <div class="form-footer">
                  <button type="submit" class="primary-button">Créer mon compte</button>
                  <p class="feedback" data-register-feedback></p>
                </div>
              </form>
            </div>
          </div>
        </section>

        <!-- Vue principale (après connexion) -->
        <section class="board-view hidden" data-board>
          <div class="board-header">
            <div>
              <h2>Votre semaine</h2>
              <!-- Message personnalisé : Bonjour / Bon après-midi -->
              <p class="subtitle" data-user-greeting></p>
            </div>

            <!-- Actions -->
            <div class="board-actions">
              <button class="ghost-button" data-open-quick-task>Ajouter rapidement</button>
              <button class="primary-button" data-open-task-dialog>Nouvelle tâche</button>
            </div>
          </div>

          <!-- Conteneur du calendrier -->
          <div class="calendar-wrapper">
            <div class="calendar" data-calendar></div>
          </div>
        </section>
      </main>
    </div>

    <!-- Fenêtre modale pour créer une nouvelle tâche -->
    <dialog class="task-dialog" data-task-dialog>
      <form id="task-form" method="dialog">
        <header>
          <h3>Nouvelle tâche</h3>
          <button type="button" class="ghost-button" data-close-dialog aria-label="Fermer">✕</button>
        </header>

        <div class="dialog-body">
          <!-- Titre -->
          <div class="field">
            <label for="task-title">Titre</label>
            <input id="task-title" name="title" type="text" required maxlength="80" placeholder="Ex : Préparer la réunion" />
          </div>
          <!-- Jour -->
          <div class="field">
            <label for="task-day">Jour</label>
            <select id="task-day" name="day" required></select>
          </div>
          <!-- Description -->
          <div class="field">
            <label for="task-description">Notes</label>
            <textarea id="task-description" name="description" rows="4" placeholder="Ajoutez des détails utiles..."></textarea>
          </div>
        </div>

        <footer class="dialog-footer">
          <button type="button" class="ghost-button" data-close-dialog>Annuler</button>
          <button type="submit" class="primary-button">Enregistrer</button>
        </footer>
      </form>
    </dialog>

    <!-- Fenêtre modale pour ajout rapide -->
    <dialog class="quick-task" data-quick-task>
      <form id="quick-task-form" method="dialog">
        <label class="sr-only" for="quick-task-input">Titre de la tâche</label>
        <input id="quick-task-input" name="title" type="text" placeholder="Ajouter une tâche..." maxlength="80" required />
        <select name="day" id="quick-task-day"></select>
        <button type="submit" class="primary-button">Ajouter</button>
      </form>
    </dialog>

    <!-- Modèle (template) d’une carte tâche -->
    <template id="task-template">
      <article class="task-card" draggable="true">
        <div class="task-content">
          <h4></h4>
          <p class="task-notes"></p>
        </div>
        <div class="task-meta">
          <!-- Bouton suppression -->
          <button class="ghost-button" data-delete-task aria-label="Supprimer la tâche">✕</button>
        </div>
      </article>
    </template>

    <!-- Script principal -->
    <script type="module" src="app.js"></script>
  </body>
</html>
